function initialize(){ditto.sidebar&&init_sidebar_section(),ditto.back_to_top_button&&init_back_to_top_button(),ditto.edit_button&&init_edit_button(),router(),$(window).on("hashchange",router)}function init_sidebar_section(){$.get(ditto.sidebar_file,function(t){$(ditto.sidebar_id).html(marked(t)),ditto.search_bar&&init_searchbar();var o=$(ditto.sidebar_id+" ol");o.attr("start",0),o.find("li a").map(function(){menu.push(this.href.slice(this.href.indexOf("#")))}),$("#pageup").on("click",function(){for(var t=getHash().nav,o=0;o<menu.length&&""!==t&&menu[o]!=="#"+t;o++);location.hash=menu[o-1]}),$("#pagedown").on("click",function(){for(var t=getHash().nav,o=0;o<menu.length&&""!==t&&menu[o]!=="#"+t;o++);location.hash=menu[o+1]})},"text").fail(function(){alert("Opps! can't find the sidebar file to display!")})}function init_searchbar(){$(ditto.sidebar_id).find("h2").first().before($(""))}function searchbar_listener(t){var o=$("input[name=search]").val();if(""!==o){var i="https://github.com/ruanyf/es6tutorial/search?utf8=✓&q="+encodeURIComponent(o);window.open(i,"_blank"),win.focus()}return!1}function init_back_to_top_button(){$(ditto.back_to_top_id).show(),$(ditto.back_to_top_id).on("click",goTop)}function goTop(t){t&&t.preventDefault(),$("html, body").animate({scrollTop:0},200),history.pushState(null,null,"#"+location.hash.split("#")[1])}function goSection(t){$("html, body").animate({scrollTop:$("#"+t).offset().top},300)}function init_edit_button(){null===ditto.base_url?alert("Error! You didn't set 'base_url' when calling ditto.run()!"):($(ditto.edit_id).hide(),$(ditto.edit_id).on("click",function(){var t=location.hash.replace("#","/");/#.*$/.test(t)&&(t=t.replace(/#.*$/,"")),""===t&&(t="/"+ditto.index.replace(".md","")),window.open(ditto.base_url+t+".md")}))}function replace_symbols(t){return t.replace(/, /g,",").replace(/[&\/\\#,.+=$~%'":*?<>{}\ \]\[]/g,"-").replace(/[()]/g,"")}function li_create_linkage(t,o){html_safe_tag=replace_symbols(t.text()),t.attr("data-src",html_safe_tag),t.attr("class","link"),t.click(function(i){i.preventDefault();var n=$(ditto.content_id+" h"+o+"."+t.attr("data-src"));$("html, body").animate({scrollTop:n.offset().top},200),original_color=n.css("color"),n.animate({color:"#ED1C24"},500,function(){$(this).animate({color:original_color},2500)}),history.pushState(null,null,"#"+location.hash.split("#")[1]+"#"+t.attr("data-src"))})}function create_page_anchors(){for(var t=2;t<=4;t++){var o=[];if($("#content h"+t).map(function(){var t=$(this).text();o.push(t),$(this).addClass(replace_symbols(t)),this.id=replace_symbols(t),$(this).hover(function(){$(this).html(t+' <a href="#'+location.hash.split("#")[1]+"#"+replace_symbols(t)+'" class="section-link">§</a> <a href="#'+location.hash.split("#")[1]+'" onclick="goTop()">⇧</a>')},function(){$(this).html(t)}),$(this).on("click","a.section-link",function(o){o.preventDefault(),history.pushState(null,null,"#"+location.hash.split("#")[1]+"#"+replace_symbols(t)),goSection(replace_symbols(t))})}),2===t&&0!==o.length)for(var i=$("<ol></ol>").insertAfter("#content h1").addClass("content-toc").attr("id","content-toc"),n=0;n<o.length;n++){var e=$("<li></li>").html('<a href="#'+location.hash.split("#")[1]+"#"+o[n]+'">'+o[n]+"</a>");i.append(e),li_create_linkage(e,t)}}}function normalize_paths(){$(ditto.content_id+" img").map(function(){var t=$(this).attr("src").replace("./","");if("http"!==$(this).attr("src").slice(0,4)){var o=location.pathname.substr(0,location.pathname.length-1),i=location.hash.replace("#",""),n=(i=i.split("/")).slice(0,i.length-1).toString();$(this).attr("src",o+n+"/"+t)}})}function show_error(){console.log("SHOW ERORR!"),$(ditto.error_id).show()}function show_loading(){$(ditto.loading_id).show(),$(ditto.content_id).html("");return setInterval(function(){$(ditto.loading_id).fadeIn(1e3).fadeOut(1e3)},2e3)}function router(){var t,o=location.hash.replace(/#([^#]*)(#.*)?/,"./$1"),i=location.hash.split("#");i.length>2&&!/^comment-/.test(i[2])&&(t=i[2]),ditto.save_progress&&store.get("menu-progress")!==location.hash&&(store.set("menu-progress",location.hash),store.set("page-progress",0)),"/index.html"===location.pathname?(o=location.pathname.replace("index.html",ditto.index),normalize_paths()):""===o?(o=location.pathname+ditto.index,normalize_paths()):o+=".md",$(window).off("scroll");var n=show_loading();$.get(o,function(o){$(ditto.error_id).hide(),$(ditto.content_id).html(marked(o)+disqusCode),$(ditto.content_id+" h1").text()===ditto.document_title?document.title=ditto.document_title:document.title=$(ditto.content_id+" h1").text()+"-"+ditto.document_title,normalize_paths(),create_page_anchors(),$("#content code").map(function(){Prism.highlightElement(this)});var i=ditto.save_progress?store.get("page-progress")||0:0;t?$("html, body").animate({scrollTop:$("#"+decodeURI(t)).offset().top},300):(""!==location.hash||Boolean(i))&&(Boolean(i)?$("html, body").animate({scrollTop:($("body").height()-$(window).height())*i},200):($("html, body").animate({scrollTop:$("#content").offset().top+10},300),$("html, body").animate({scrollTop:$("#content").offset().top},300))),""===location.hash||"#"+getHash().nav===menu[0]?$("#pageup").css("display","none"):$("#pageup").css("display","inline-block"),"#"+getHash().nav===menu[menu.length-1]?$("#pagedown").css("display","none"):$("#pagedown").css("display","inline-block"),function(){var t=$(window),o=$(".progress-indicator-2"),i=t.height(),n=$("body").height()-i;t.on("scroll",function(){window.requestAnimationFrame(function(){!function(t){o.css({width:100*t+"%"}),ditto.save_progress&&store.set("page-progress",t)}(Math.max(0,Math.min(1,t.scrollTop()/n)))})})}()}).fail(function(){show_error()}).always(function(){clearInterval(n),$(ditto.loading_id).hide()})}function addConfig(t,o){Object.keys(o).forEach(function(i){t[i]=o[i]})}var ditto={content_id:"#content",sidebar_id:"#sidebar",edit_id:"#edit",back_to_top_id:"#back_to_top",loading_id:"#loading",error_id:"#error",sidebar:!0,edit_button:!0,back_to_top_button:!0,save_progress:!0,search_bar:!0,run:initialize},getHash=function(t){return(t=t||window.location.hash.substr(1))?(t=t.split("#"),{nav:t[0],anchor:decodeURIComponent(t[1]||"")}):{nav:"",anchor:""}},disqusCode="",menu=new Array,CONFIG={document_title:"topchenxi",index:"README.md",sidebar_file:"docs/nav/sidebar.md",base_url:""};addConfig(ditto,CONFIG);